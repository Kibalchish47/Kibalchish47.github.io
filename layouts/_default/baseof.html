<!doctype html>
<html lang="en" class="scroll-smooth">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            {{ if .IsHome }}
                {{ .Site.Title }}
            {{ else }}
                {{ .Title }} - {{ .Site.Title }}
            {{ end }}
        </title>
        
        {{ partialCached "css.html" . }}
        
        {{ $styles := resources.Get "css/tailwind.css" }}
        
        {{ if $styles }}
            {{ if hugo.IsServer }}
                <link rel="stylesheet" href="{{ $styles.RelPermalink }}">
            {{ else }}
                {{ $processedStyles := $styles | resources.PostProcess | minify | fingerprint }}
                <link rel="stylesheet" href="{{ $processedStyles.RelPermalink }}" integrity="{{ $processedStyles.Data.Integrity }}">
            {{ end }}
        {{ else }}
            {{/* Log an error if css/tailwind.css is not found in assets */}}
            {{ if hugo.IsProduction }}
                {{ errorf "Critical CSS file 'assets/css/tailwind.css' not found. Build failed." }}
            {{ else }}
                {{ warnf "'assets/css/tailwind.css' not found. Site will not be styled correctly." }}
                <style>body { border: 5px solid red; font-family: sans-serif; padding: 1em; } body::before { content: 'WARNING: assets/css/tailwind.css NOT FOUND!'; display: block; color: red; font-weight: bold; margin-bottom: 1em; }</style>
            {{ end }}
        {{ end }}

        <link rel="icon" type="image/png" href="{{ relURL "favicon.png" }}" /> {{/* Adjust to your favicon path */}}
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;500;700&display=swap" rel="stylesheet" />
        {{ block "head_extra" . }}
        {{ end }}
    </head>
    <body class="bg-lime-400 text-purple-700 flex flex-col min-h-screen font-sans">
        {{ partial "site-header.html" . }}

        <main class="container mx-auto px-6 py-8 flex-grow">
            {{ block "main" . }}
            {{ end }}
        </main>

        {{ partial "site-footer.html" . }}

        {{ block "scripts_extra" . }}
        {{ end }}
    </body>
</html>
