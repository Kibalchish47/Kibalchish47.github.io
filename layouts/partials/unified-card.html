<article class="bg-white dark:bg-custom-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col h-full
               transition-all duration-300 ease-in-out
               hover:shadow-2xl hover:-translate-y-1.5 border border-transparent hover:border-custom-red-200 dark:hover:border-custom-red-500/20 unified-card-animation">

    {{ if and (eq .Type "portfolio") (.Params.image) }}
        <a href="{{ .RelPermalink }}" class="block overflow-hidden">
            <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}" class="w-full h-48 object-cover transition-transform duration-300 ease-in-out hover:scale-105" loading="lazy">
        </a>
    {{ end }}

    <div class="p-6 flex-grow flex flex-col">
        <h3 class="font-semibold text-custom-gray-800 dark:text-custom-red-100 mb-2 {{ if eq .Type `publications` }}text-lg{{ else }}text-xl{{ end }}">
            <a href="{{ .RelPermalink }}" class="hover:underline">{{ .Title }}</a>
        </h3>

        {{ if eq .Type "experience" }}
            <p class="font-medium text-custom-gray-600 dark:text-custom-gray-400 text-sm">{{ .Params.company }} | <span class="text-custom-gray-500">{{ .Params.duration }}</span></p>
        {{ else if eq .Type "publications" }}
            {{ with .Params.authors }}<p class="text-xs text-custom-gray-500 dark:text-custom-gray-400 mb-1">By: {{ delimit . ", " }}</p>{{ end }}
            {{ if .Date }}<p class="text-xs text-custom-gray-500 dark:text-custom-gray-400 mb-2">Published: {{ .Date.Format "January 2, 2006" }}{{ with .Params.journal }} in <em>{{ . }}</em>{{ end }}</p>{{ end }}
        {{ end }}

        <div class="prose prose-sm max-w-none text-custom-gray-700 dark:text-custom-gray-400 my-3 flex-grow">
            <p>{{ .Params.summary | default .Summary | plainify | truncate 180 }}</p>
        </div>

        <div class="mt-auto pt-4">
            {{ with .Params.tags }}
            <div class="flex flex-wrap gap-2 mb-4">
                {{ range . }}
                <span class="text-xs bg-custom-red-100 text-custom-red-800 px-2 py-1 rounded-full font-medium dark:bg-custom-red-500/10 dark:text-custom-red-400">{{ . }}</span>
                {{ end }}
            </div>
            {{ end }}

            {{ if eq .Type "publications" }}
                <div class="flex justify-between items-center">
                    <a href="{{ .RelPermalink }}" class="text-custom-red-500 hover:underline text-sm font-semibold">Read more &rarr;</a>
                    {{ with .Params.link }}
                        <a href="{{ . }}" target="_blank" rel="noopener noreferrer" class="btn-secondary text-xs inline-flex items-center gap-x-1.5">
                            <span>External Link</span>
                            {{ partial "icon.html" "external-link" }}
                        </a>
                    {{ end }}
                </div>
            {{ else }}
                 <a href="{{ .RelPermalink }}" class="btn-primary">View Details</a>
            {{ end }}
        </div>
    </div>
</article>
