{{ $count := .Get "count" | default 2 }}
<section class="py-10 md:py-16 bg-custom-red-50 dark:bg-custom-gray-900/50 rounded-xl shadow-lg mb-12 md:mb-16">
    <div class="container mx-auto px-6">
        <h2 class="text-2xl md:text-3xl font-semibold text-custom-gray-800 dark:text-custom-red-100 mb-8 text-center flex items-center justify-center gap-x-3">
            {{ partial "icon.html" "folder-kanban" }}
            <a href="{{ "/portfolio/" | relURL }}" class="hover:underline">Featured Projects</a>
        </h2>
        <div class="grid md:grid-cols-2 gap-6 md:gap-8">
            {{ $projects := where (where .Site.RegularPages "Type" "portfolio") ".Params.category" "Project" }}
            {{ range first $count ($projects.ByDate.Reverse) }}
                {{ partial "unified-card.html" . }}
            {{ else }}
                <p class="md:col-span-2 text-center text-custom-gray-600 py-4">No featured projects yet.</p>
            {{ end }}
        </div>
        {{ if gt (len $projects) $count }}
        <div class="text-center mt-10">
            <a href="{{ "/portfolio/" | relURL }}" class="btn-primary">View All Projects</a>
        </div>
        {{ end }}
    </div>
</section>
